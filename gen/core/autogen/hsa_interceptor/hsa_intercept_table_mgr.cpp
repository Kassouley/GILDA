#include "hsa_intercept_table_mgr.h"
#include "handler_manager.h"
#include "hsa.h"
#include "hsa_ext_amd.h"

hsa_intercept_table_t hsa_itcp_table;

void load_hsa_itcp_table() {
	void *handle = load_handle("/opt/rocm/lib/libhsa-runtime64.so");
	HANDLE(hsa_itcp_table, hsa_amd_coherency_get_type, handle);
	HANDLE(hsa_itcp_table, hsa_amd_coherency_set_type, handle);
	HANDLE(hsa_itcp_table, hsa_amd_profiling_set_profiler_enabled, handle);
	HANDLE(hsa_itcp_table, hsa_amd_profiling_async_copy_enable, handle);
	HANDLE(hsa_itcp_table, hsa_amd_profiling_get_dispatch_time, handle);
	HANDLE(hsa_itcp_table, hsa_amd_profiling_get_async_copy_time, handle);
	HANDLE(hsa_itcp_table, hsa_amd_profiling_convert_tick_to_system_domain, handle);
	HANDLE(hsa_itcp_table, hsa_amd_signal_create, handle);
	HANDLE(hsa_itcp_table, hsa_amd_signal_value_pointer, handle);
	HANDLE(hsa_itcp_table, hsa_amd_signal_async_handler, handle);
	HANDLE(hsa_itcp_table, hsa_amd_async_function, handle);
	HANDLE(hsa_itcp_table, hsa_amd_signal_wait_any, handle);
	HANDLE(hsa_itcp_table, hsa_amd_image_get_info_max_dim, handle);
	HANDLE(hsa_itcp_table, hsa_amd_queue_cu_set_mask, handle);
	HANDLE(hsa_itcp_table, hsa_amd_queue_cu_get_mask, handle);
	HANDLE(hsa_itcp_table, hsa_amd_memory_pool_get_info, handle);
	HANDLE(hsa_itcp_table, hsa_amd_agent_iterate_memory_pools, handle);
	HANDLE(hsa_itcp_table, hsa_amd_memory_pool_allocate, handle);
	HANDLE(hsa_itcp_table, hsa_amd_memory_pool_free, handle);
	HANDLE(hsa_itcp_table, hsa_amd_memory_async_copy, handle);
	HANDLE(hsa_itcp_table, hsa_amd_memory_async_copy_on_engine, handle);
	HANDLE(hsa_itcp_table, hsa_amd_memory_copy_engine_status, handle);
	HANDLE(hsa_itcp_table, hsa_amd_memory_async_copy_rect, handle);
	HANDLE(hsa_itcp_table, hsa_amd_agent_memory_pool_get_info, handle);
	HANDLE(hsa_itcp_table, hsa_amd_agents_allow_access, handle);
	HANDLE(hsa_itcp_table, hsa_amd_memory_pool_can_migrate, handle);
	HANDLE(hsa_itcp_table, hsa_amd_memory_migrate, handle);
	HANDLE(hsa_itcp_table, hsa_amd_memory_lock, handle);
	HANDLE(hsa_itcp_table, hsa_amd_memory_lock_to_pool, handle);
	HANDLE(hsa_itcp_table, hsa_amd_memory_unlock, handle);
	HANDLE(hsa_itcp_table, hsa_amd_memory_fill, handle);
	HANDLE(hsa_itcp_table, hsa_amd_interop_map_buffer, handle);
	HANDLE(hsa_itcp_table, hsa_amd_interop_unmap_buffer, handle);
	HANDLE(hsa_itcp_table, hsa_amd_image_create, handle);
	HANDLE(hsa_itcp_table, hsa_amd_pointer_info, handle);
	HANDLE(hsa_itcp_table, hsa_amd_pointer_info_set_userdata, handle);
	HANDLE(hsa_itcp_table, hsa_amd_ipc_memory_create, handle);
	HANDLE(hsa_itcp_table, hsa_amd_ipc_memory_attach, handle);
	HANDLE(hsa_itcp_table, hsa_amd_ipc_memory_detach, handle);
	HANDLE(hsa_itcp_table, hsa_amd_ipc_signal_create, handle);
	HANDLE(hsa_itcp_table, hsa_amd_ipc_signal_attach, handle);
	HANDLE(hsa_itcp_table, hsa_amd_register_system_event_handler, handle);
	HANDLE(hsa_itcp_table, hsa_amd_queue_set_priority, handle);
	HANDLE(hsa_itcp_table, hsa_amd_register_deallocation_callback, handle);
	HANDLE(hsa_itcp_table, hsa_amd_deregister_deallocation_callback, handle);
	HANDLE(hsa_itcp_table, hsa_amd_svm_attributes_set, handle);
	HANDLE(hsa_itcp_table, hsa_amd_svm_attributes_get, handle);
	HANDLE(hsa_itcp_table, hsa_amd_svm_prefetch_async, handle);
	HANDLE(hsa_itcp_table, hsa_amd_spm_acquire, handle);
	HANDLE(hsa_itcp_table, hsa_amd_spm_release, handle);
	HANDLE(hsa_itcp_table, hsa_amd_spm_set_dest_buffer, handle);
	HANDLE(hsa_itcp_table, hsa_amd_portable_export_dmabuf, handle);
	HANDLE(hsa_itcp_table, hsa_amd_portable_close_dmabuf, handle);
	HANDLE(hsa_itcp_table, hsa_amd_vmem_address_reserve, handle);
	HANDLE(hsa_itcp_table, hsa_amd_vmem_address_free, handle);
	HANDLE(hsa_itcp_table, hsa_amd_vmem_handle_create, handle);
	HANDLE(hsa_itcp_table, hsa_amd_vmem_handle_release, handle);
	HANDLE(hsa_itcp_table, hsa_amd_vmem_map, handle);
	HANDLE(hsa_itcp_table, hsa_amd_vmem_unmap, handle);
	HANDLE(hsa_itcp_table, hsa_amd_vmem_set_access, handle);
	HANDLE(hsa_itcp_table, hsa_amd_vmem_get_access, handle);
	HANDLE(hsa_itcp_table, hsa_amd_vmem_export_shareable_handle, handle);
	HANDLE(hsa_itcp_table, hsa_amd_vmem_import_shareable_handle, handle);
	HANDLE(hsa_itcp_table, hsa_amd_vmem_retain_alloc_handle, handle);
	HANDLE(hsa_itcp_table, hsa_amd_vmem_get_alloc_properties_from_handle, handle);
	HANDLE(hsa_itcp_table, hsa_amd_agent_set_async_scratch_limit, handle);
	HANDLE(hsa_itcp_table, hsa_status_string, handle);
	HANDLE(hsa_itcp_table, hsa_init, handle);
	HANDLE(hsa_itcp_table, hsa_shut_down, handle);
	HANDLE(hsa_itcp_table, hsa_system_get_info, handle);
	HANDLE(hsa_itcp_table, hsa_extension_get_name, handle);
	HANDLE(hsa_itcp_table, hsa_system_extension_supported, handle);
	HANDLE(hsa_itcp_table, hsa_system_major_extension_supported, handle);
	HANDLE(hsa_itcp_table, hsa_system_get_extension_table, handle);
	HANDLE(hsa_itcp_table, hsa_system_get_major_extension_table, handle);
	HANDLE(hsa_itcp_table, hsa_agent_get_info, handle);
	HANDLE(hsa_itcp_table, hsa_iterate_agents, handle);
	HANDLE(hsa_itcp_table, hsa_agent_get_exception_policies, handle);
	HANDLE(hsa_itcp_table, hsa_cache_get_info, handle);
	HANDLE(hsa_itcp_table, hsa_agent_iterate_caches, handle);
	HANDLE(hsa_itcp_table, hsa_agent_extension_supported, handle);
	HANDLE(hsa_itcp_table, hsa_agent_major_extension_supported, handle);
	HANDLE(hsa_itcp_table, hsa_signal_create, handle);
	HANDLE(hsa_itcp_table, hsa_signal_destroy, handle);
	HANDLE(hsa_itcp_table, hsa_signal_load_scacquire, handle);
	HANDLE(hsa_itcp_table, hsa_signal_load_relaxed, handle);
	HANDLE(hsa_itcp_table, hsa_signal_load_acquire, handle);
	HANDLE(hsa_itcp_table, hsa_signal_store_relaxed, handle);
	HANDLE(hsa_itcp_table, hsa_signal_store_screlease, handle);
	HANDLE(hsa_itcp_table, hsa_signal_store_release, handle);
	HANDLE(hsa_itcp_table, hsa_signal_silent_store_relaxed, handle);
	HANDLE(hsa_itcp_table, hsa_signal_silent_store_screlease, handle);
	HANDLE(hsa_itcp_table, hsa_signal_exchange_scacq_screl, handle);
	HANDLE(hsa_itcp_table, hsa_signal_exchange_acq_rel, handle);
	HANDLE(hsa_itcp_table, hsa_signal_exchange_scacquire, handle);
	HANDLE(hsa_itcp_table, hsa_signal_exchange_acquire, handle);
	HANDLE(hsa_itcp_table, hsa_signal_exchange_relaxed, handle);
	HANDLE(hsa_itcp_table, hsa_signal_exchange_screlease, handle);
	HANDLE(hsa_itcp_table, hsa_signal_exchange_release, handle);
	HANDLE(hsa_itcp_table, hsa_signal_cas_scacq_screl, handle);
	HANDLE(hsa_itcp_table, hsa_signal_cas_acq_rel, handle);
	HANDLE(hsa_itcp_table, hsa_signal_cas_scacquire, handle);
	HANDLE(hsa_itcp_table, hsa_signal_cas_acquire, handle);
	HANDLE(hsa_itcp_table, hsa_signal_cas_relaxed, handle);
	HANDLE(hsa_itcp_table, hsa_signal_cas_screlease, handle);
	HANDLE(hsa_itcp_table, hsa_signal_cas_release, handle);
	HANDLE(hsa_itcp_table, hsa_signal_add_scacq_screl, handle);
	HANDLE(hsa_itcp_table, hsa_signal_add_acq_rel, handle);
	HANDLE(hsa_itcp_table, hsa_signal_add_scacquire, handle);
	HANDLE(hsa_itcp_table, hsa_signal_add_acquire, handle);
	HANDLE(hsa_itcp_table, hsa_signal_add_relaxed, handle);
	HANDLE(hsa_itcp_table, hsa_signal_add_screlease, handle);
	HANDLE(hsa_itcp_table, hsa_signal_add_release, handle);
	HANDLE(hsa_itcp_table, hsa_signal_subtract_scacq_screl, handle);
	HANDLE(hsa_itcp_table, hsa_signal_subtract_acq_rel, handle);
	HANDLE(hsa_itcp_table, hsa_signal_subtract_scacquire, handle);
	HANDLE(hsa_itcp_table, hsa_signal_subtract_acquire, handle);
	HANDLE(hsa_itcp_table, hsa_signal_subtract_relaxed, handle);
	HANDLE(hsa_itcp_table, hsa_signal_subtract_screlease, handle);
	HANDLE(hsa_itcp_table, hsa_signal_subtract_release, handle);
	HANDLE(hsa_itcp_table, hsa_signal_and_scacq_screl, handle);
	HANDLE(hsa_itcp_table, hsa_signal_and_acq_rel, handle);
	HANDLE(hsa_itcp_table, hsa_signal_and_scacquire, handle);
	HANDLE(hsa_itcp_table, hsa_signal_and_acquire, handle);
	HANDLE(hsa_itcp_table, hsa_signal_and_relaxed, handle);
	HANDLE(hsa_itcp_table, hsa_signal_and_screlease, handle);
	HANDLE(hsa_itcp_table, hsa_signal_and_release, handle);
	HANDLE(hsa_itcp_table, hsa_signal_or_scacq_screl, handle);
	HANDLE(hsa_itcp_table, hsa_signal_or_acq_rel, handle);
	HANDLE(hsa_itcp_table, hsa_signal_or_scacquire, handle);
	HANDLE(hsa_itcp_table, hsa_signal_or_acquire, handle);
	HANDLE(hsa_itcp_table, hsa_signal_or_relaxed, handle);
	HANDLE(hsa_itcp_table, hsa_signal_or_screlease, handle);
	HANDLE(hsa_itcp_table, hsa_signal_or_release, handle);
	HANDLE(hsa_itcp_table, hsa_signal_xor_scacq_screl, handle);
	HANDLE(hsa_itcp_table, hsa_signal_xor_acq_rel, handle);
	HANDLE(hsa_itcp_table, hsa_signal_xor_scacquire, handle);
	HANDLE(hsa_itcp_table, hsa_signal_xor_acquire, handle);
	HANDLE(hsa_itcp_table, hsa_signal_xor_relaxed, handle);
	HANDLE(hsa_itcp_table, hsa_signal_xor_screlease, handle);
	HANDLE(hsa_itcp_table, hsa_signal_xor_release, handle);
	HANDLE(hsa_itcp_table, hsa_signal_wait_scacquire, handle);
	HANDLE(hsa_itcp_table, hsa_signal_wait_relaxed, handle);
	HANDLE(hsa_itcp_table, hsa_signal_wait_acquire, handle);
	HANDLE(hsa_itcp_table, hsa_signal_group_create, handle);
	HANDLE(hsa_itcp_table, hsa_signal_group_destroy, handle);
	HANDLE(hsa_itcp_table, hsa_signal_group_wait_any_scacquire, handle);
	HANDLE(hsa_itcp_table, hsa_signal_group_wait_any_relaxed, handle);
	HANDLE(hsa_itcp_table, hsa_queue_create, handle);
	HANDLE(hsa_itcp_table, hsa_soft_queue_create, handle);
	HANDLE(hsa_itcp_table, hsa_queue_destroy, handle);
	HANDLE(hsa_itcp_table, hsa_queue_inactivate, handle);
	HANDLE(hsa_itcp_table, hsa_queue_load_read_index_acquire, handle);
	HANDLE(hsa_itcp_table, hsa_queue_load_read_index_scacquire, handle);
	HANDLE(hsa_itcp_table, hsa_queue_load_read_index_relaxed, handle);
	HANDLE(hsa_itcp_table, hsa_queue_load_write_index_acquire, handle);
	HANDLE(hsa_itcp_table, hsa_queue_load_write_index_scacquire, handle);
	HANDLE(hsa_itcp_table, hsa_queue_load_write_index_relaxed, handle);
	HANDLE(hsa_itcp_table, hsa_queue_store_write_index_relaxed, handle);
	HANDLE(hsa_itcp_table, hsa_queue_store_write_index_release, handle);
	HANDLE(hsa_itcp_table, hsa_queue_store_write_index_screlease, handle);
	HANDLE(hsa_itcp_table, hsa_queue_cas_write_index_acq_rel, handle);
	HANDLE(hsa_itcp_table, hsa_queue_cas_write_index_scacq_screl, handle);
	HANDLE(hsa_itcp_table, hsa_queue_cas_write_index_acquire, handle);
	HANDLE(hsa_itcp_table, hsa_queue_cas_write_index_scacquire, handle);
	HANDLE(hsa_itcp_table, hsa_queue_cas_write_index_relaxed, handle);
	HANDLE(hsa_itcp_table, hsa_queue_cas_write_index_release, handle);
	HANDLE(hsa_itcp_table, hsa_queue_cas_write_index_screlease, handle);
	HANDLE(hsa_itcp_table, hsa_queue_add_write_index_acq_rel, handle);
	HANDLE(hsa_itcp_table, hsa_queue_add_write_index_scacq_screl, handle);
	HANDLE(hsa_itcp_table, hsa_queue_add_write_index_acquire, handle);
	HANDLE(hsa_itcp_table, hsa_queue_add_write_index_scacquire, handle);
	HANDLE(hsa_itcp_table, hsa_queue_add_write_index_relaxed, handle);
	HANDLE(hsa_itcp_table, hsa_queue_add_write_index_release, handle);
	HANDLE(hsa_itcp_table, hsa_queue_add_write_index_screlease, handle);
	HANDLE(hsa_itcp_table, hsa_queue_store_read_index_relaxed, handle);
	HANDLE(hsa_itcp_table, hsa_queue_store_read_index_release, handle);
	HANDLE(hsa_itcp_table, hsa_queue_store_read_index_screlease, handle);
	HANDLE(hsa_itcp_table, hsa_region_get_info, handle);
	HANDLE(hsa_itcp_table, hsa_agent_iterate_regions, handle);
	HANDLE(hsa_itcp_table, hsa_memory_allocate, handle);
	HANDLE(hsa_itcp_table, hsa_memory_free, handle);
	HANDLE(hsa_itcp_table, hsa_memory_copy, handle);
	HANDLE(hsa_itcp_table, hsa_memory_assign_agent, handle);
	HANDLE(hsa_itcp_table, hsa_memory_register, handle);
	HANDLE(hsa_itcp_table, hsa_memory_deregister, handle);
	HANDLE(hsa_itcp_table, hsa_isa_from_name, handle);
	HANDLE(hsa_itcp_table, hsa_agent_iterate_isas, handle);
	HANDLE(hsa_itcp_table, hsa_isa_get_info, handle);
	HANDLE(hsa_itcp_table, hsa_isa_get_info_alt, handle);
	HANDLE(hsa_itcp_table, hsa_isa_get_exception_policies, handle);
	HANDLE(hsa_itcp_table, hsa_isa_get_round_method, handle);
	HANDLE(hsa_itcp_table, hsa_wavefront_get_info, handle);
	HANDLE(hsa_itcp_table, hsa_isa_iterate_wavefronts, handle);
	HANDLE(hsa_itcp_table, hsa_isa_compatible, handle);
	HANDLE(hsa_itcp_table, hsa_code_object_reader_create_from_file, handle);
	HANDLE(hsa_itcp_table, hsa_code_object_reader_create_from_memory, handle);
	HANDLE(hsa_itcp_table, hsa_code_object_reader_destroy, handle);
	HANDLE(hsa_itcp_table, hsa_executable_create, handle);
	HANDLE(hsa_itcp_table, hsa_executable_create_alt, handle);
	HANDLE(hsa_itcp_table, hsa_executable_destroy, handle);
	HANDLE(hsa_itcp_table, hsa_executable_load_program_code_object, handle);
	HANDLE(hsa_itcp_table, hsa_executable_load_agent_code_object, handle);
	HANDLE(hsa_itcp_table, hsa_executable_freeze, handle);
	HANDLE(hsa_itcp_table, hsa_executable_get_info, handle);
	HANDLE(hsa_itcp_table, hsa_executable_global_variable_define, handle);
	HANDLE(hsa_itcp_table, hsa_executable_agent_global_variable_define, handle);
	HANDLE(hsa_itcp_table, hsa_executable_readonly_variable_define, handle);
	HANDLE(hsa_itcp_table, hsa_executable_validate, handle);
	HANDLE(hsa_itcp_table, hsa_executable_validate_alt, handle);
	HANDLE(hsa_itcp_table, hsa_executable_get_symbol, handle);
	HANDLE(hsa_itcp_table, hsa_executable_get_symbol_by_name, handle);
	HANDLE(hsa_itcp_table, hsa_executable_symbol_get_info, handle);
	HANDLE(hsa_itcp_table, hsa_executable_iterate_symbols, handle);
	HANDLE(hsa_itcp_table, hsa_executable_iterate_agent_symbols, handle);
	HANDLE(hsa_itcp_table, hsa_executable_iterate_program_symbols, handle);
	HANDLE(hsa_itcp_table, hsa_code_object_serialize, handle);
	HANDLE(hsa_itcp_table, hsa_code_object_deserialize, handle);
	HANDLE(hsa_itcp_table, hsa_code_object_destroy, handle);
	HANDLE(hsa_itcp_table, hsa_code_object_get_info, handle);
	HANDLE(hsa_itcp_table, hsa_executable_load_code_object, handle);
	HANDLE(hsa_itcp_table, hsa_code_object_get_symbol, handle);
	HANDLE(hsa_itcp_table, hsa_code_object_get_symbol_from_name, handle);
	HANDLE(hsa_itcp_table, hsa_code_symbol_get_info, handle);
	HANDLE(hsa_itcp_table, hsa_code_object_iterate_symbols, handle);
};

